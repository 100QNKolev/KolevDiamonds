@model InvestmentCoinModel

<div id="errorMessages"></div>

<div class="investment-coin-form">
    <form id="myForm" asp-area="Admin" asp-controller="Jewelry" asp-action="Add" method="post">

        <div class="form-group">
            <label asp-for="Name">Name:</label>
            <input asp-for="Name" class="form-control" />
            <span asp-validation-for="Name" class="text-danger"></span>
        </div>

        <div class="form-group">
            <label asp-for="ImagePath">Image Path:</label>
            <input asp-for="ImagePath" class="form-control" />
            <span asp-validation-for="ImagePath" class="text-danger"></span>
        </div>

        <div class="form-group">
            <label asp-for="Price">Price:</label>
            <input asp-for="Price" class="form-control" />
            <span asp-validation-for="Price" class="text-danger"></span>
        </div>

        <div class="form-group">
            <label asp-for="Metal">Metal:</label>
            <select asp-for="Metal" class="form-control">
                <option value="">Select Metal</option>
                @foreach (var metal in Enum.GetValues(typeof(MetalVariation)))
                {
                    <option value="@metal">@metal</option>
                }
            </select>
            <span asp-validation-for="Metal" class="text-danger"></span>
        </div>

        <div class="form-group">
            <label asp-for="Weight">Weight:</label>
            <input asp-for="Weight" class="form-control" />
            <span asp-validation-for="Weight" class="text-danger"></span>
        </div>

        <div class="form-group">
            <label asp-for="Purity">Purity:</label>
            <input asp-for="Purity" class="form-control" />
            <span asp-validation-for="Purity" class="text-danger"></span>
        </div>

        <div class="form-group">
            <label asp-for="Quality">Quality:</label>
            <select asp-for="Quality" class="form-control">
                <option value="">Select Quality</option>
                @foreach (var quality in Enum.GetValues(typeof(GoldQuality)))
                {
                    <option value="@quality">@quality</option>
                }
            </select>
            <span asp-validation-for="Quality" class="text-danger"></span>
        </div>

        <div class="form-group">
            <label asp-for="Circulation">Circulation:</label>
            <input asp-for="Circulation" class="form-control" />
            <span asp-validation-for="Circulation" class="text-danger"></span>
        </div>

        <div class="form-group">
            <label asp-for="Diameter">Diameter:</label>
            <input asp-for="Diameter" class="form-control" />
            <span asp-validation-for="Diameter" class="text-danger"></span>
        </div>

        <div class="form-group">
            <label asp-for="LegalTender">Legal Tender:</label>
            <input asp-for="LegalTender" class="form-control" />
            <span asp-validation-for="LegalTender" class="text-danger"></span>
        </div>

        <div class="form-group">
            <label asp-for="Manufacturer">Manufacturer:</label>
            <input asp-for="Manufacturer" class="form-control" />
            <span asp-validation-for="Manufacturer" class="text-danger"></span>
        </div>

        <div class="form-group">
            <label asp-for="Packaging">Packaging:</label>
            <input asp-for="Packaging" class="form-control" />
            <span asp-validation-for="Packaging" class="text-danger"></span>
        </div>

        <div class="form-group">
            <label asp-for="IsForSale">Is For Sale:</label>
            <div class="form-check">
                <input asp-for="IsForSale" class="form-check-input" />
                <label class="form-check-label" asp-for="IsForSale">Yes</label>
            </div>
            <span asp-validation-for="IsForSale" class="text-danger"></span>
        </div>

        <button type="submit" class="btn btn-primary">Submit</button>

    </form>
</div>

<div id="errorMessages"></div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(document).ready(function () {
        $('#myForm').submit(function (event) {
            // Prevent default form submission
            event.preventDefault();

            // Serialize form data
            var formData = $(this).serialize();

            // Send AJAX request
            $.ajax({
                url: '@Url.Action("SubmitInvestmentCoinForm", "Jewelry")',
                type: 'POST',
                data: formData,
                success: function (response) {
                    // Clear any previous error messages
                    $('#errorMessages').empty();

                    // Check if the response contains validation errors
                    if (response.success === false && response.errors) {
                        // Display validation errors
                        var errorsHtml = '<ul class="text-danger">';
                        $.each(response.errors, function (index, error) {
                            errorsHtml += '<li>' + error + '</li>';
                        });
                        errorsHtml += '</ul>';
                        $('#errorMessages').html(errorsHtml);
                    } else {
                        // Handle other types of response (e.g., success)
                        // Display success message
                        alert('Operation completed successfully');
                        // You may update the page or perform other actions here
                    }
                },
                error: function (xhr, status, error) {
                    // Handle error response
                    console.error(error);
                }
            });
        });
    });
</script>
