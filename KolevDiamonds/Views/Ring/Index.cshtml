@model IEnumerable<ProductIndexServiceModel>

@{
    ViewData["Title"] = "All Rings";
}

<h1 style="text-align: center; font-weight: lighter; margin-bottom: 20px;">
    <span style="background-color: white; padding: 0 10px;">All Rings</span>
</h1>
<hr style="width: 80%; margin: 0 auto; border-top: 1px solid black;">

<form id="filterForm">
    <label for="priceFilter">Filter by Price:</label>
    <input type="number" id="priceFilter" name="priceFilter" min="0" step="any" value="@ViewBag.PriceFilter" />
    <button type="button" onclick="applyFilter()">Apply</button>
</form>

<div id="ringList" class="ring-container">
    @foreach (var ring in Model)
    {
        <div class="ring-item" onclick="navigateToDetail(@ring.Id)">
            <img src="@Url.Content(ring.ImagePath)" alt="@ring.Name" class="ring-image" />
            <div class="ring-details">
            <div><strong>Name:</strong> @ring.Name</div>
            <div><strong>Price:</strong> @ring.Price</div>
            </div>
        </div>
    }
</div>

<style>
    .ring-container {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
    }

    .ring-item {
        background-color: #f9f9f9;
        border-radius: 8px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        display: flex;
        flex-direction: column;
        width: 300px;
    }

    .ring-image {
        border-top-left-radius: 8px;
        border-top-right-radius: 8px;
        height: 200px;
        object-fit: cover;
        width: 100%;
    }

    .ring-details {
        padding: 10px;
    }

        .ring-details div {
            margin-bottom: 5px;
        }

        .ring-details strong {
            font-weight: bold;
        }

    #filterForm {
        margin-top: 20px;
        margin-bottom: 20px;
    }
</style>

<script>
    function applyFilter() {
        var priceFilter = $('#priceFilter').val();
        $.ajax({
            url: '@Url.Action("FilterRings", "Ring")',
            type: 'GET',
            data: { priceFilter: priceFilter },
            success: function (result) {
                $('#ringList').html(result);
            }
        });
    }

    function navigateToDetail(ringId) {
        window.location.href = '@Url.Action("Details", "Ring")' + '?id=' + ringId;
    }
</script>